[gd_scene load_steps=52 format=2]

[ext_resource path="res://sprites/player/spr_player.png" type="Texture" id=1]
[ext_resource path="res://objects/player/states/Ground.gd" type="Script" id=2]
[ext_resource path="res://objects/player/Air.gd" type="Script" id=3]
[ext_resource path="res://objects/player/Player.gd" type="Script" id=4]
[ext_resource path="res://objects/player/Ledge.gd" type="Script" id=5]
[ext_resource path="res://objects/player/Backflip.gd" type="Script" id=6]
[ext_resource path="res://objects/player/Turn.gd" type="Script" id=7]
[ext_resource path="res://objects/player/Death.gd" type="Script" id=8]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 3, 4.45333 )

[sub_resource type="Animation" id=2]
resource_name = "Backflip"
length = 0.6
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.2, 0.4 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ 11, 12, 4 ]
}

[sub_resource type="Animation" id=3]
resource_name = "Crouch"
length = 0.15
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 1 ]
}

[sub_resource type="Animation" id=37]
resource_name = "Death Air"
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 13 ]
}

[sub_resource type="Animation" id=38]
resource_name = "Death Ground"
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 14 ]
}

[sub_resource type="Animation" id=4]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 0 ]
}

[sub_resource type="Animation" id=5]
resource_name = "Jump Down"
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 4 ]
}

[sub_resource type="Animation" id=6]
resource_name = "Jump Mid"
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 3 ]
}

[sub_resource type="Animation" id=7]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 2 ]
}

[sub_resource type="Animation" id=8]
resource_name = "Ledge"
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 5 ]
}

[sub_resource type="Animation" id=9]
length = 0.4
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 6, 9 ]
}

[sub_resource type="Animation" id=10]
resource_name = "Turn"
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 10 ]
}

[sub_resource type="AnimationNodeAnimation" id=11]
animation = "Backflip"

[sub_resource type="AnimationNodeAnimation" id=12]
animation = "Crouch"

[sub_resource type="AnimationNodeAnimation" id=39]
animation = "Death Air"

[sub_resource type="AnimationNodeAnimation" id=40]
animation = "Death Ground"

[sub_resource type="AnimationNodeAnimation" id=13]
animation = "Idle"

[sub_resource type="AnimationNodeAnimation" id=14]
animation = "Jump Down"

[sub_resource type="AnimationNodeAnimation" id=15]
animation = "Jump Mid"

[sub_resource type="AnimationNodeAnimation" id=16]
animation = "Jump Up"

[sub_resource type="AnimationNodeAnimation" id=17]
animation = "Ledge"

[sub_resource type="AnimationNodeAnimation" id=18]
animation = "Run"

[sub_resource type="AnimationNodeAnimation" id=19]
animation = "Turn"

[sub_resource type="AnimationNodeStateMachineTransition" id=20]

[sub_resource type="AnimationNodeStateMachineTransition" id=21]

[sub_resource type="AnimationNodeStateMachineTransition" id=22]

[sub_resource type="AnimationNodeStateMachineTransition" id=23]

[sub_resource type="AnimationNodeStateMachineTransition" id=24]

[sub_resource type="AnimationNodeStateMachineTransition" id=25]

[sub_resource type="AnimationNodeStateMachineTransition" id=26]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=27]

[sub_resource type="AnimationNodeStateMachineTransition" id=28]

[sub_resource type="AnimationNodeStateMachineTransition" id=29]

[sub_resource type="AnimationNodeStateMachineTransition" id=30]

[sub_resource type="AnimationNodeStateMachineTransition" id=31]

[sub_resource type="AnimationNodeStateMachineTransition" id=32]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=33]

[sub_resource type="AnimationNodeStateMachineTransition" id=34]

[sub_resource type="AnimationNodeStateMachineTransition" id=41]

[sub_resource type="AnimationNodeStateMachineTransition" id=42]

[sub_resource type="AnimationNodeStateMachineTransition" id=43]

[sub_resource type="AnimationNodeStateMachine" id=35]
states/Backflip/node = SubResource( 11 )
states/Backflip/position = Vector2( 942, -82 )
states/Crouch/node = SubResource( 12 )
states/Crouch/position = Vector2( 947, 161 )
"states/Death Air/node" = SubResource( 39 )
"states/Death Air/position" = Vector2( 824, 330 )
"states/Death Ground/node" = SubResource( 40 )
"states/Death Ground/position" = Vector2( 560, 265 )
states/Idle/node = SubResource( 13 )
states/Idle/position = Vector2( 680, 161 )
"states/Jump Down/node" = SubResource( 14 )
"states/Jump Down/position" = Vector2( 845, 18 )
"states/Jump Mid/node" = SubResource( 15 )
"states/Jump Mid/position" = Vector2( 662, -15 )
"states/Jump Up/node" = SubResource( 16 )
"states/Jump Up/position" = Vector2( 680, 67 )
states/Ledge/node = SubResource( 17 )
states/Ledge/position = Vector2( 1042, 54 )
states/Run/node = SubResource( 18 )
states/Run/position = Vector2( 352, 134 )
states/Turn/node = SubResource( 19 )
states/Turn/position = Vector2( 352, -82 )
transitions = [ "Idle", "Run", SubResource( 20 ), "Run", "Idle", SubResource( 21 ), "Idle", "Jump Up", SubResource( 22 ), "Jump Up", "Jump Mid", SubResource( 23 ), "Jump Mid", "Jump Down", SubResource( 24 ), "Jump Down", "Crouch", SubResource( 25 ), "Crouch", "Idle", SubResource( 26 ), "Jump Down", "Ledge", SubResource( 27 ), "Ledge", "Jump Down", SubResource( 28 ), "Turn", "Run", SubResource( 29 ), "Run", "Turn", SubResource( 30 ), "Turn", "Backflip", SubResource( 31 ), "Backflip", "Jump Down", SubResource( 32 ), "Backflip", "Crouch", SubResource( 33 ), "Backflip", "Ledge", SubResource( 34 ), "Death Air", "Death Ground", SubResource( 41 ), "Crouch", "Death Air", SubResource( 42 ), "Idle", "Death Air", SubResource( 43 ) ]
start_node = "Idle"
end_node = "Death Ground"
graph_offset = Vector2( 287, -50 )

[sub_resource type="AnimationNodeStateMachinePlayback" id=36]

[node name="Player" type="KinematicBody2D"]
script = ExtResource( 4 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2( 0, -4.43545 )
shape = SubResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( 0, -6 )
z_index = -1
texture = ExtResource( 1 )
hframes = 15

[node name="States" type="Node2D" parent="."]
visible = false

[node name="Ground" type="Node2D" parent="States"]
script = ExtResource( 2 )

[node name="Air" type="Node2D" parent="States"]
script = ExtResource( 3 )

[node name="RayRight" type="RayCast2D" parent="States/Air"]
position = Vector2( 3, -8 )
enabled = true
cast_to = Vector2( 0.5, 0 )
collision_mask = 2

[node name="RayLeft" type="RayCast2D" parent="States/Air"]
position = Vector2( -3, -8 )
enabled = true
cast_to = Vector2( -0.5, 0 )
collision_mask = 2

[node name="Ledge" type="Node2D" parent="States"]
script = ExtResource( 5 )

[node name="Backflip" type="Node2D" parent="States"]
script = ExtResource( 6 )

[node name="Turn" type="Node2D" parent="States"]
script = ExtResource( 7 )

[node name="Death" type="Node2D" parent="States"]
script = ExtResource( 8 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
method_call_mode = 1
anims/Backflip = SubResource( 2 )
anims/Crouch = SubResource( 3 )
"anims/Death Air" = SubResource( 37 )
"anims/Death Ground" = SubResource( 38 )
anims/Idle = SubResource( 4 )
"anims/Jump Down" = SubResource( 5 )
"anims/Jump Mid" = SubResource( 6 )
"anims/Jump Up" = SubResource( 7 )
anims/Ledge = SubResource( 8 )
anims/Run = SubResource( 9 )
anims/Turn = SubResource( 10 )

[node name="Animation" type="AnimationTree" parent="."]
tree_root = SubResource( 35 )
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/playback = SubResource( 36 )
