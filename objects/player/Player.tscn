[gd_scene load_steps=32 format=2]

[ext_resource path="res://sprites/player/spr_player.png" type="Texture" id=1]
[ext_resource path="res://objects/player/states/Ground.gd" type="Script" id=2]
[ext_resource path="res://objects/player/Air.gd" type="Script" id=3]
[ext_resource path="res://objects/player/Player.gd" type="Script" id=4]
[ext_resource path="res://objects/player/Ledge.gd" type="Script" id=5]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 3, 4.45333 )

[sub_resource type="Animation" id=4]
resource_name = "Crouch"
length = 0.15
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 1 ]
}

[sub_resource type="Animation" id=2]
resource_name = "Idle"
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 0 ]
}

[sub_resource type="Animation" id=7]
resource_name = "Jump Down"
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 4 ]
}

[sub_resource type="Animation" id=6]
resource_name = "Jump Mid"
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 3 ]
}

[sub_resource type="Animation" id=5]
resource_name = "Jump Up"
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 2 ]
}

[sub_resource type="Animation" id=23]
resource_name = "Ledge"
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 5 ]
}

[sub_resource type="Animation" id=3]
resource_name = "Run"
length = 0.4
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 6, 9 ]
}

[sub_resource type="AnimationNodeAnimation" id=8]
animation = "Crouch"

[sub_resource type="AnimationNodeAnimation" id=9]
animation = "Idle"

[sub_resource type="AnimationNodeAnimation" id=10]
animation = "Jump Down"

[sub_resource type="AnimationNodeAnimation" id=11]
animation = "Jump Mid"

[sub_resource type="AnimationNodeAnimation" id=12]
animation = "Jump Up"

[sub_resource type="AnimationNodeAnimation" id=24]
animation = "Ledge"

[sub_resource type="AnimationNodeAnimation" id=13]
animation = "Run"

[sub_resource type="AnimationNodeStateMachineTransition" id=14]

[sub_resource type="AnimationNodeStateMachineTransition" id=15]

[sub_resource type="AnimationNodeStateMachineTransition" id=16]

[sub_resource type="AnimationNodeStateMachineTransition" id=17]

[sub_resource type="AnimationNodeStateMachineTransition" id=18]

[sub_resource type="AnimationNodeStateMachineTransition" id=19]

[sub_resource type="AnimationNodeStateMachineTransition" id=20]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=25]

[sub_resource type="AnimationNodeStateMachineTransition" id=26]

[sub_resource type="AnimationNodeStateMachine" id=21]
states/Crouch/node = SubResource( 8 )
states/Crouch/position = Vector2( 920, 126 )
states/Idle/node = SubResource( 9 )
states/Idle/position = Vector2( 680, 161 )
"states/Jump Down/node" = SubResource( 10 )
"states/Jump Down/position" = Vector2( 846, 49 )
"states/Jump Mid/node" = SubResource( 11 )
"states/Jump Mid/position" = Vector2( 670, 36 )
"states/Jump Up/node" = SubResource( 12 )
"states/Jump Up/position" = Vector2( 497, 54 )
states/Ledge/node = SubResource( 24 )
states/Ledge/position = Vector2( 1042, 54 )
states/Run/node = SubResource( 13 )
states/Run/position = Vector2( 352, 134 )
transitions = [ "Idle", "Run", SubResource( 14 ), "Run", "Idle", SubResource( 15 ), "Idle", "Jump Up", SubResource( 16 ), "Jump Up", "Jump Mid", SubResource( 17 ), "Jump Mid", "Jump Down", SubResource( 18 ), "Jump Down", "Crouch", SubResource( 19 ), "Crouch", "Idle", SubResource( 20 ), "Jump Down", "Ledge", SubResource( 25 ), "Ledge", "Jump Down", SubResource( 26 ) ]
start_node = "Idle"

[sub_resource type="AnimationNodeStateMachinePlayback" id=22]

[node name="Player" type="KinematicBody2D"]
script = ExtResource( 4 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2( 0, -4.43545 )
shape = SubResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( 0, -6 )
z_index = -1
texture = ExtResource( 1 )
hframes = 11

[node name="States" type="Node2D" parent="."]
visible = false

[node name="Ground" type="Node2D" parent="States"]
script = ExtResource( 2 )

[node name="Air" type="Node2D" parent="States"]
script = ExtResource( 3 )

[node name="RayRight" type="RayCast2D" parent="States/Air"]
position = Vector2( 3, -8 )
enabled = true
cast_to = Vector2( 0.5, 0 )
collision_mask = 2

[node name="RayLeft" type="RayCast2D" parent="States/Air"]
position = Vector2( -3, -8 )
enabled = true
cast_to = Vector2( -0.5, 0 )
collision_mask = 2

[node name="Ledge" type="Node2D" parent="States"]
script = ExtResource( 5 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
method_call_mode = 1
anims/Crouch = SubResource( 4 )
anims/Idle = SubResource( 2 )
"anims/Jump Down" = SubResource( 7 )
"anims/Jump Mid" = SubResource( 6 )
"anims/Jump Up" = SubResource( 5 )
anims/Ledge = SubResource( 23 )
anims/Run = SubResource( 3 )

[node name="Animation" type="AnimationTree" parent="."]
tree_root = SubResource( 21 )
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/playback = SubResource( 22 )
